# 불필요한 객체 생성을 피하라
<br>

이번 주제에 대해서는 익히 들었던 이야기이다 <br>
객체를 생성하게 되면 JVM의 힙 영역에 객체들이 생성되게 되고, 객체의 사용이 끝나면 가비지 컬렉터(GC)의 스캔 대상이 되어, 가비지 컬렉터가 돈다 <br>
가비지 컬렉터의 특징 중 하나는 STW(Stop The World) 으로, 가비지 컬렉터가 돌면서 JVM이 멈춘다는 점이다 <br>
그렇기 때문에 이걸 줄이기 위해서 불필요한 객체를 줄여야 한다고만 듣고, 최대한 객체를 생성해서 사용하는 것보다는 autowired 나 정적 팩토리 메소드를 통해서 사용하려고 노력중이다 <br>
<br>

책에서 언급했던 예시로는 크게 3가지가 있다 <br>
String 과 정규식 그리고 박싱/언박싱의 개념이다 <br>
<br>

### String
우리가 자주 사용하는 String을 사용할 떄 new String() 이렇게 사용하는 것은 살면서 본적이 없을 것이다 <br>
실제로 한 번도 그러한 코드는 본적이 없다... (물론 코드를 그렇게 많이 보지는 않았지만..) <br>
JVM에서는 String을 내부의 풀에서 캐싱을 해두고 있다 <br>
일종의 해쉬맵에 만든 모든 String을 담아두고, 또 동일한 문자열을 참조하려고 하면 이미 만들어둔 풀에서 참조해서 가져오는 방법이다 <br>
물론, 만약에 같은 JVM에서 생성된 문자열이 아니면 다를 수 도 있다 <br>
예를 들면, 외부 api에서 받아온 String과 내부에서 생성한 String 같은 경우에는 같은 JVM 태생이 아니기 때문에 다르다 -> 그래서 일반적인 equals을 통해서 비교
그래서 같은 문자열을 가지고 ==을 통해서 비교하게되면 같다고 나온다 <br>
하지만 new String을 통해서 만들어버리면 ==을 통해서 비교해보면 다르다고 나온다 <br>


<br><br>

### 정규식
정규식을 생성하는 방법인 Pattern.compile()이라는 함수는 객체 생성하는데 있어서 자원을 많이 먹는 객체 중 하나이다 <br>
String.matches()을 통해서 비교하는 과정을 그냥 기본적으로 생성해서 사용해보는 것과 따로 static final로 빼두고 가져와 사용하는 것과는 <br>
해당 메소드를 100번씩만 호출해도 벌써 100배 정도의 차이가 나는 것을 확인할 수 있었다 <br>

그래서 static final 와 같이 만들어두고 사용하는 것 처럼 캐싱을 통해 재사용을 하는게 좋다
<br><br>

### 박싱/언박싱
객체의 타입에는 박싱/언박싱 개념이 있다 <br>

크게 primitive 타입과 wrapper 타입 이렇게 나뉘어진다 <br>
primitive 타입을 우리가 알고 있는 int, boolean, long 등의 소문자 객체 타입을 의미한다 <br>
그럼 반대인 wrapper 타입은 생각보다 생소한 Integer, Boolean, Long 과 같은 박싱 타입을 의미하는데 이것들은 primitive 객체와는 다르게 null-safe한 장점이 존재한다 <br>
null-safe이라고 하니까 뭔가 거창해보이지만, wrapper 타입으로 사용하게되면 하나의 객체로 생성이되어, null이 들어갈 수도, 메소드를 사용할 수도 있다는 점이다 <br>

이렇게 2가지 타입을 동시에 사용하는 케이스에 의도치않게 박싱/언박싱 과정에서 불필요한 객체가 만들어진다는 것 <br>
<br><br>

그래서 객체를 줄이는게 베스트이다? 는 아니고, 객체 지향 언어인데 객체를 잘 사용하라는 의미이지만 그렇다고 줄이기에 급급하면 static 으로만 만들고, 이는 또 메모리에 부담을 주는 일이다 <br>
즉, 뭐든 과하지 않고 객체를 많이 많이 사용하되, 정말 필요 없는 케이스에는 사용하지 말라는 의미이다 <br>
<br><br><br>


@Deprecated
만약에 더이상 사용하지 않는 메소드가 있거나 대체제가 나와서 앞으로 사용되지 않을 예정인 그러한 케이스를 가진 메소드에다가 사용하는 애노테이션이다 
앞으로 사용되지 않을 예정이거나 오직 과거의 하위호환성을 위해서 남겨둔 그러한 메소드나 필드에 달 수 있다 <br>
만약 그렇게 달아두게 되면, 컴파일러로 하여금 -(줄)을 ~~이런식으로~~ 그어지게 된다 
이외에도 javadocs에서 @deprecated을 통해서 명시도 가능하다 




정규 표현식

