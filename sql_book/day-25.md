# 인덱스의 작성, 삭제
_인덱스를 조작하는 방법에 대해서 알아보자_ <br>
<br><br><br>

인덱스는 데이터베이스 객체의 하나로, DDL을 사용해서 작성하거나 삭제한다 <br>
<br>

## 인덱스 생성
인덱스는 CREATE INDEX 이라는 키워드를 통해서 생성한다 <br>
인덱스를 만들면서 이름을 붙혀 관리하게 되는데, 각 데이터베이스마다 조금씩의 차이는 존재한다 <br>
오라클, DB2같은 데이터베이스에서는 인덱스가 스키마 객체가 되기 때문에 스키마 내에 이름이 중복되지 않도록 지정해서 관리 <br>
MySQL, SQL Server 같은 데이터베이스에서 인덱스가 테이블 내의 객체가 되기 때문에 테이블 내에서 이름이 중복되지 않도록 관리 <br>
<br><br>

인덱스를 생성할 때는 해당 인덱스가 어느 테이블의 어느 열에 관한 것인지 지정해줄 필요가 있다 <br>
```sql
CRETAE INDEX 인덱스명 ON 테이블명 (열1, 열2, ... )
```

인덱스를 생성하게 되면 저장장치에 색인용 데이터가 만들어진다. 테이블의 크기에 따라 인덱스 작성시간도 달라지는데, 행이 대량으로 존재하면 시간도 많이 걸리고 저장공간도 많이 소비함 <br>
<br><br><br>

## 인덱스 삭제
인덱스 삭제는 DROP INDEX 이라는 키워드를 통해서 삭제한다 <br>
테이블 삭제하는 것 처럼 인덱스의 이름만 넣어줌을 통해서 삭제하는 것이 가능 -> DROP INDEX 인덱스명 <br>
만약 테이블 내 객체로써 작성할 경우에는 테이블의 이름도 포함해야함 -> DROP INDEX 인덱스명 ON 테이블명 <br>
<br>

인덱스는 테이블에 의존하는 객체이기 때문에 DROP TABLE로 테이블을 삭제하면 테이블에 작성된 인덱스도 같이 삭제된다 <br>
<br>

인덱스는 SELECT시 효율성을 높여준다 하지만 INSERT 시에는 인덱스를 최신 상태로 갱신하는 처리가 늘어나기 때문에 오히려 속도가 느려진다 <br>
예시로 보자 <br>
<br>

```sql
CREATE INDEX IDX_SAMPLE65 ON sample62(a);
```
요론 식으로 인덱스를 만들었다고 가정해보자 <br>
select 시, where 절에 a 컬럼에 대한 조건식을 지정한 경우에는 인덱스로 인해서 속도가 빠를 예정이다 <br>
select * from sample62 where a='z'; <br>
이런 식으로 작성한 경우에는 정상적으로 인덱스를 탈 예정이지만 만약 조건식에서 a 컬럼에 대해서 조건을 넣지 않았다면 인덱스를 안쓴다 <br>
<br><br><br>

## EXPLAIN
위에서 인덱스를 생성해둔 열을 조회하는 경우에는 인덱스를 탄다고 했는데, 실제로 인덱스를 사용했는지 확인하는 방법이 이 EXPLAIN 명령이다 <br>
```sql
EXPLAIN SQL 명령
```
EXPLAIN 명령은 EXPLAIN 뒤에 확인하고 싶은 SELECT 명령 등의 SQL을 지정해준다 <br>
뒤에다가 쿼리문을 넣는다고 해서 진짜 쿼리를 돌리는 것이 아니라 **어떠한 상태**로 실행되는지를 설명해준다 <br>
EXPLAIN 명령은 표준 SQL에는 존재하지 않는 데이터베이스에 의존되어 있는 명령이기 때문에 내일 회사가서나 해보자 <br>
<br><br><br>

## 최적화
인덱스를 통해서 훌륭한 성능을 내는 것은 데이터베이스 내부의 최적화에 의해서 처리되는 부분이다 <br>
내부 처리는 select 문이 들어오면 일단 실행계획을 만든다 <br>
실행계획이라는 인덱스가 지정된 컬럼이 where 조건에 들어가 있으니 인덱스를 사용하자 이렇게 판단하는 과정이다 <br>
그리고 위에서 봤던 EXPLAIN 명령어는 이 실행계획을 확인하는 명령이다 <br>
<br>

실행계획에서는 인덱스의 존재 유무, 인덱스의 사용여부에 대해서 각 데이터베이스의 최적화 처리를 통해서 판단되어 생성된다 <br>
판단하는데 있어서 인덱스의 품질도 확인한다 예를 들면 불린 값은 2개밖에 없는데 이 값들을 이진트리로 구성하면 오히려 손해이다 <br>
이렇게 데이터의 종류가 적으면 적을 수록 인덱스의 성능은 떨어진다는 점 기억하자 <br>
<br><br><br>


<br><br><br><br><br><br><br><br><br><br>