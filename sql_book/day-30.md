# Day 30

## 정규화

정규화란 테이블을 올바른 형태로 변경하고 분할하는 방식을 의미한다\
\
\


정규화란 데이터베이스의 테이블에 규정된 올바른 형태로 개선해나가는 방식이다\
정규화는 데이터베이스의 설계 단계나 시스템을 재검토, 테이블의 정리 과정에서 행해진다\
\


여기서 의미하는 정리나 재검토는 주관적 기준이다 그래도 가이드? 아니면 대략적 순서는 정해져있다\
무조건 여기서 이야기하는 순서대로 정규화를 진행해야 한다 -> 이건 아니지만 참고해서 정규화를 진행하자\
\


### 제 1 정규형

반복되는 데이터를 가로(열)이 아닌 세로(행)을 늘리는 방식으로 진행하자\
하나의 셀에 하나의 값만 저장할 수 있도록 유도하고, 반복되는 부분을 행으로 늘려나가는 것이 제 1정규화의 1단계이다\


이외에도 테이블에서 중복을 제거하는 것도 제 1 정규화의 하나라고 이야기한다\
중복되는 부분을 찾아내서 그러한 부분들을 분할해서 기본키가 될 열로 정규화하는 과정을 거친다\
\
\
\


### 제 2 정규형

제 2정규화에서는 데이터가 중복하는 부분을 찾아내서 테이블로 분리해나간다\
구체적인 말 의미는 함수 종속성을 찾아내서 테이블을 분할하는 것을 제 2 정규화라고 한다\
여기서 함수 종속성이란 키 값을 사용해서 데이터를 특정지을 수 있는 것을 의미한다\
\
\
\


### 제 3 정규형

이것도 중복하는 부분을 찾아내서 테이블을 분할하는 방식인데, 제 3 정규화에서는 기본키 이외의 부분에서 중복이 없는지를 조사한다\
\
\
\


### 정규화의 목적

정규화에서는 중복하거나 반복되는 부분을 찾아내서 테이블을 분할하고, 기본키를 작성해서 사용하는 것을 기본 개념으로 잡고 있는데\
결국 이 의미는 하나의 데이터는 한 곳에 있어야 한다는 규칙을 공통적으로 의미한다\
\


하나의 데이터가 반드기 한 곳에만 저장되어 있다면 데이터를 변경하더라도 한 곳만 변경하게 된다 -> 다양한 테이블을 거쳐야하는 의미없는 노동을 줄이기 위해서이다\
만약 정규화를 하지 않는다면 검색도 여러 가지 테이블을 거쳐야하며, 수정하거나 삽입할 때 여러 가지 테이블을 거쳐야하는 단점이 존재함\
여담으로 심지어 인덱스까지 조절해야하는 단점이 존재한다\
\


하지만 정규화를 통해 기본키를 분할해 두었다면 해당 단일 테이블만 건들면 되기 때문에 아주 유익하다고 볼 수 있다\
\
\
\


## 트랜잭션

데이터베이스에서는 트랜잭션이라는 기능을 제공하는데, 트랜잭션이란 작업의 단위라고 표현한다\
데이터베이스를 사용하는데 있어서 트랜잭션을 나눠서 작업을 진행하게 되면 데이터를 건드는 작업이다 보니\
데이터를 로컬에서 수정하고 실제 데이터베이스에 적용하거나 로컬에서 수정한 데이터를 다시 실제 데이터베이스의 데이터로 되돌리는 이러한 작업들을 지원\
\
\


### 롤백과 커밋

실제로 트랜잭션을 사용해서 데이터를 추가하게 됨다면 에러가 발생해도 트랜잭션을 롤백함으로써 변경사항을 없었던 것으로 할 수 있다\
만약 에러가 발생하지 않았다면, 커밋을 통해서 변경사항을 저장하고 트랜잭션을 종료하는 과정을 거친다\
\
\


**자동커밋**

트랜잭션을 통해서 꼼꼼하게 작업을 진행하게 되면 자동커밋 설정을 꺼둬야 한다\
많은 RDBMS에는 자동커밋을 지원하고 있는데, INSERT/UPDATE/DELETE 와같은 명령을 실행하면 자동으로 커밋된다\
MySQL에서는 따로 설정을 통해서 켜는 것이 아니라\
START TRANSACTION 이라는 키워드를 사용해서 실제 트랜잭션을 종료하지 않고 진행할 수 있다\
위에서 말한 것처럼 문제 없이 진행을 했을 경우에는 COMMIT 을 통해서 로컬 변경사항을 디비에 적용한다\
만약 로컬에서 진행했던 변경사항에서 문제가 있었다면 ROLLBACK 을 통해서 로컬의 변경사항을 무로 되돌린다\
\
\
\


\
\
\
\
\
\
\
\
\
\
